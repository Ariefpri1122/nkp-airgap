
Deploy NKP Managed Cluster
-------------------------- 

From AUTOAD VM Copy ca.crt in bastion (/etc/docker/certs.d/[your harbor ip address]:[port]/ca.crt to AUTOADVM c:\inetpub\wwwroot using winscp
	- using http://autoadm_vm_ip --> download the ca.crt file to your laptop (certificate file for harbor registry)
	- using http://autoadm_vm_ip --> download the cert.crt file to your laptop (certifigate file for docker registry from commander airgap installation)

From BASTION vm execute this command --> echo "https://$(kubectl -n kommander get kommandercluster host-cluster -o jsonpath='{.status.ingress.address}'):5000"
	- take a note on that URL
	- ex: https://10.38.106.41:5000

Take a note on minimum requirement of managed Cluster:
- Control Plane  --> 1x VM with 4 vCPU + 12 GB Memory + 80 GB Disk (development)
- Worker Node    --> 4x VM with 8 vCPU + 12 GB Memory + 95 GB Disk 

From NKP Dashboard - Global - Workspaces:

	1.	Global - Workspace - Create Workspace
		⁃	Name					: arief-workspace
		⁃	Create
	2.	Continue to workspace
	⁃	Action - Add Cluster
		⁃	cluster name				:	arief-nkp
		⁃	SSH Public Key				:	ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIBM2C9FLMlL6xXcMRZt6Yjf1cgadN/1S6M8V3M6OQDbD arief.pribadi@nutanix.com	# Check cat .ssh/id_ed25519.pub in bastion VM
		⁃	Nutanix Prism Project			:	lab
		⁃	Nutanix AOS Cluster			:	PHX-POC334
		⁃	Subnet					:	primary-PHX-POC334
		⁃	OS Image				:	nkp-rocky-9.5-release-1.31.9-20250702204537.qcow2
		⁃	CP End Point IP				:	+1 IP from LAST COMMANDER LB RANGE --> make sure checked by PING or IP Scanner its a FREE IP (ex: 10.38.106.52)
		⁃	CP Node Count				:	1
		⁃	CPU Per Node (vCPU)			:	4
		⁃	Memory Per Node				:	12
		⁃	Disk Size Per Node			:	80
		⁃	Nutanix AOS Cluster			:	PHX-POC334
		⁃	Subnet					:	primary-PHX-POC334
		⁃	OS Image				:	nkp-rocky-9.5-release-1.31.9-20250702204537.qcow2
		⁃	Nutanix Prism Project			:	lab
		⁃	Worker Node Count			:	4
		-	CPU Per Node (vCPU)			:	8
		⁃	Memory Per Node				:	12
		⁃	Disk Size Per Node			:	80
		⁃	Storage Container			:	default
		⁃	Load Balancing Start			:	Start +1 IP from CP End Point Above (ex: 10.38.106.53)--> make sure checked by PING or IP Scanner its a FREE IP
		⁃	Load Balancing End			:	End +6 IP from above --> make sure checked by PING or IP Scanner its a FREE IP (ex: 10.38.106.59)
		⁃	Image Registry Mirror	
			⁃	URL				:	https://airgap.arief.com:5000
			⁃	username			:	admin
			⁃	password			:	nutanix/4u
			⁃	CA				:	downloaded cert.crt
		⁃	Private Registry	
			⁃	URL				:	https://10.38.13.140:5000	# Your harbor URL Access as noted above
			⁃	username			:	nutanix
			⁃	password			:	nx2Tech974!
			⁃	CA				:	downloaded ca.cert
	-	Create

From NKP Dashboard - Your Workspace - CLusters - view details your cluster:
	- Generate Token (by clicking your username from the right top corner)
	- Login using above username and password
		* Put the CA Certificate into your .kube directory --> Copy and Paste in code-server terminal (bastion)
		* These commands will update ~/.kube/config --> Copy and Paste in code-server terminal (bastion) 4x times
		* from code-server terminal --> kubectl get nodes
	- Modify your .kube\config 'context name' with more friendly name
		* ex: name: objective_chaplygin-10.38.106.53 (Managed Cluster) --> for managed cluster
		* ex: name: objective_chaplygin-10.38.106.41 (Kommander) --> for commander cluster
	- use kubectx to switch between cluster-context
